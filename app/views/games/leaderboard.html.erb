<% if is_mobile? %>
  <% @body_class = "leaderboard-page--mobile" %>
<% else %>
  <% @body_class = "leaderboard-page" %>
<% end %>

<% @mobile_container_id = "leaderboard--#{@game.slug}" %>

<section class="leaderboard-nav">
  <a class="leaderboard-back" href="/games/<%= @game.id %>"><i class="fa fa-chevron-left back-button"></i></a>
  <h1 class="leaderboard__title">Leaderboard</h1>
  <p class="leaderboard__subtitle"><%= @game.name %></p>
</section>

<section class="leaderboard-head">
  <h1 class="leaderboard-head__title">Leaderboard</h1>
  <p class="leaderboard-head__game"><%= @game.name %></p>
</section>

<div class="leaderboard__cat-wrapper">
  <div class="leaderboard__cat">
    <h2 class="cat-title tab-toggle ga-tab--alltime active" data-tab-cat=".leaderboard--all-time">All-Time</h2>
    <h2 class="cat-title tab-toggle ga-tab--weekly" data-tab-cat=".leaderboard--weekly">Weekly</h2>
  </div>
</div>
<section class="game-leaderboard">
  <div class="tab-section leaderboard leaderboard--all-time">
    <ul class="list--leaderboard"></ul>
    <% get_alltime_leaderboard({game_id: @game.id} ).each.with_index(1) do | record, rank | %>
    	<div class="leaderboard-row">
        <span class="leaderboard-rank"><%= rank %></span>
        <span class="leaderboard-user"><%= record[0] %></span>
        <span class="leaderboard-score"><%= record[1] %></span>
      </div>
    <% end %>
  </div>

  <div class="tab-section leaderboard leaderboard--weekly hidden">
    <ul class="list--leaderboard"></ul>
    <% get_weekly_leaderboard({game_id: @game.id} ).each.with_index(1) do | record, rank | %>
      <div class="leaderboard-row">
        <span class="leaderboard-rank"><%= rank %></span>
        <span class="leaderboard-user"><%= record[0] %></span>
        <span class="leaderboard-score"><%= record[1] %></span>
      </div>
    <% end %>
  </div>
</section>


<% if Rails.env.production? %>
  <!-- GA Tracking Events -->
  <%= render 'layouts/tracking_events' %>
<% end %>
