<% if is_mobile? %>
    <% content_for :body_class, "leaderboard-page--mobile" %>
<% else %>
    <% content_for :body_class, "leaderboard-page" %>
<% end %>

<% @mobile_container_id = "leaderboard--placeholder" %>

<section class="leaderboard-nav">
    <h1 class="leaderboard__title leaderboard__title--headline"><%= @game.name %></h1>

    <div id="leaderboard__cat--0" class="js-leaderboard__cat leaderboard__cat">
        <h2 class="tab-control__title js-tab--cat ga-tab--myfriends active" data-tab-cat=".leaderboard--my-friends">My Friends</h2>
        <h2 class="tab-control__title js-tab--cat ga-tab--alltime" data-tab-cat=".leaderboard--all-time">All-Time</h2>
        <h2 class="tab-control__title js-tab--cat ga-tab--weekly" data-tab-cat=".leaderboard--weekly" >Weekly</h2>
    </div>
</section>
<!-- If game is tap the right color -->
<% if @game.slug == 'tap-color' %>
    <div class="leaderboard__cat-wrapper">
        <div class="leaderboard__cat leaderboard__cat--3">
            <h2 class="tab-control__title js-tab--difficulty active" data-tab-cat=".js-leaderboard--easy">Easy</h2>
            <h2 class="tab-control__title js-tab--difficulty" data-tab-cat=".js-leaderboard--medium">Medium</h2>
            <h2 class="tab-control__title js-tab--difficulty" data-tab-cat=".js-leaderboard--hard">Hard</h2>
        </div>
    </div>
<% end %>

<!-- If game is tap the right color -->
<% if @game.slug == 'tap-color' %>
     <div class="js-leaderboard--easy js-leaderboard-diff leaderboard-diff active">
        <h2 class="leaderboard-diff__title">Easy</h2>
        <section class="game-leaderboard">
            <div class="tab-section js-tab-section leaderboard leaderboard--all-time active">
                <!-- Start Loop -->
                <% get_leaderboard_hash({game_id:@game.id,version: 1,timeframe: 'alltime'}).each_with_index do | record, i | %>
                    <% break if i > 9 %>
                    <div class="leaderboard-row">
                        <div class="leaderboard-row__wrap">
                            <span class="leaderboard-rank"><%= record[0] %><span class="leaderboard__avatar" style="background-image: url('<%= record[1]["image"] %>'); "></span></span>
                            <span class="leaderboard-user"><%= record[1]["name"] %></span>
                            <span class="leaderboard-score"><%= record[1]["score"] %></span>
                        </div><!-- /.leaderboard-row__wrap -->
                    </div><!-- /.leaderboard-row -->
                <% end %>
                <!-- End Loop -->
            </div>

            <div class="tab-section js-tab-section leaderboard leaderboard--weekly">
                <!-- Start Loop -->
                <% get_leaderboard_hash({game_id:@game.id,version: 1,timeframe: 'weekly'}).each_with_index do | record, i | %>
                    <% break if i > 9 %>
                    <div class="leaderboard-row">
                        <div class="leaderboard-row__wrap">
                            <span class="leaderboard-rank"><%= record[0] %><span class="leaderboard__avatar" style="background-image: url('<%= record[1]["image"] %>'); "></span></span>
                            <span class="leaderboard-user"><%= record[1]["name"] %></span>
                            <span class="leaderboard-score"><%= record[1]["score"] %></span>
                        </div><!-- /leaderboard-row__wrap -->
                    </div><!-- /.leaderboard-row -->
                <% end %>
                <!-- End Loop -->
            </div>
        </section>
    </div><!-- /.leaderboard-diff -->

     <div class="js-leaderboard--medium js-leaderboard-diff leaderboard-diff">
        <h2 class="leaderboard-diff__title">Medium</h2>
        <section class="game-leaderboard">
            <div class="tab-section js-tab-section leaderboard leaderboard--all-time active">
                <!-- Start Loop -->
                    <div class="leaderboard-row">
                        <span class="leaderboard-rank">1</span>
                        <span class="leaderboard-user">John Doe</span>
                        <span class="leaderboard-score">687</span>
                    </div><!-- /.leaderboard-row -->

                    <div class="leaderboard-row">
                        <span class="leaderboard-rank">2</span>
                        <span class="leaderboard-user">Joe Shmoe</span>
                        <span class="leaderboard-score">320</span>
                    </div><!-- /.leaderboard-row -->
                <!-- End Loop -->
            </div>

            <div class="tab-section js-tab-section leaderboard leaderboard--weekly">
                <!-- Start Loop -->
                    <div class="leaderboard-row">
                        <span class="leaderboard-rank">1</span>
                        <span class="leaderboard-user">John Doe</span>
                        <span class="leaderboard-score">687</span>
                    </div><!-- /.leaderboard-row -->

                    <div class="leaderboard-row">
                        <span class="leaderboard-rank">2</span>
                        <span class="leaderboard-user">Joe Shmoe</span>
                        <span class="leaderboard-score">320</span>
                    </div><!-- /.leaderboard-row -->

                    <div class="leaderboard-row">
                        <span class="leaderboard-rank">3</span>
                        <span class="leaderboard-user">Griff Hall</span>
                        <span class="leaderboard-score">107</span>
                    </div><!-- /.leaderboard-row -->
                <!-- End Loop -->
            </div>
        </section>
    </div><!-- /.leaderboard-diff -->

    <div class="js-leaderboard--hard js-leaderboard-diff leaderboard-diff">
        <h2 class="leaderboard-diff__title">Hard</h2>
        <section class="game-leaderboard">
            <div class="tab-section js-tab-section leaderboard leaderboard--all-time active">
                <!-- Start Loop -->
                    <div class="leaderboard-row">
                        <span class="leaderboard-rank">1</span>
                        <span class="leaderboard-user">John Doe</span>
                        <span class="leaderboard-score">687</span>
                    </div><!-- /.leaderboard-row -->

                    <div class="leaderboard-row">
                        <span class="leaderboard-rank">2</span>
                        <span class="leaderboard-user">Joe Shmoe</span>
                        <span class="leaderboard-score">320</span>
                    </div><!-- /.leaderboard-row -->

                    <div class="leaderboard-row">
                        <span class="leaderboard-rank">3</span>
                        <span class="leaderboard-user">Griff Hall</span>
                        <span class="leaderboard-score">107</span>
                    </div><!-- /.leaderboard-row -->

                    <div class="leaderboard-row">
                        <span class="leaderboard-rank">4</span>
                        <span class="leaderboard-user">Tyler Cone</span>
                        <span class="leaderboard-score">90</span>
                    </div><!-- /.leaderboard-row -->
                <!-- End Loop -->
            </div>

            <div class="tab-section js-tab-section leaderboard leaderboard--weekly">
                <!-- Start Loop -->
                <div class="leaderboard-row">
                    <span class="leaderboard-rank">1</span>
                    <span class="leaderboard-user">John Doe</span>
                    <span class="leaderboard-score">687</span>
                </div><!-- /.leaderboard-row -->

                <div class="leaderboard-row">
                    <span class="leaderboard-rank">2</span>
                    <span class="leaderboard-user">Joe Shmoe</span>
                    <span class="leaderboard-score">320</span>
                </div><!-- /.leaderboard-row -->
                <!-- End Loop -->
            </div>
        </section>
    </div><!-- /.leaderboard-diff --> <!-- end of ttrc conditional -->
<% else %> <!--  ********************* Normal Leaderboard *********************  -->
    <section class="game-leaderboard">
        <%= render 'games/friends_leaderboard' %>

        <div class="tab-section js-tab-section leaderboard leaderboard--all-time <% if current_user_record({slug:@game.slug,timeframe:'alltime'})["rank"].to_i <= 10 %> leaderboard--omit-current <% end %>">
            <%= render 'games/leaderboard_row', leaderboard_type: "all-time"  %>

            <%= render 'games/current_user_row', leaderboard_type: "all-time" %>
        </div> <!-- /.leaderboard--all-time -->

        <div class="tab-section js-tab-section leaderboard leaderboard--weekly <% if current_user_record({slug:@game.slug,timeframe:'alltime'})["rank"].to_i <= 10 %> leaderboard--omit-current <% end %>"><!-- current_user_record({slug:@game.slug,timeframe:'alltime'})["rank"].to_i > 10 -->
            <%= render 'games/leaderboard_row', leaderboard_type: "weekly"  %>

            <%= render 'games/current_user_row', leaderboard_type: "weekly" %>
        </div> <!-- /.leaderboard--weekly -->
    </section><!-- /.game-leaderboard -->

<% end %>

<script>
    // $(window).load(function(){
    //     $('.leaderboard-row--current-user').addClass('animate');
    // })
</script>
